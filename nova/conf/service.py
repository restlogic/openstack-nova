from bees import profiler as p
from oslo_config import cfg
service_opts = [cfg.IntOpt('report_interval', default=10, help='\nNumber of seconds indicating how frequently the state of services on a\ngiven hypervisor is reported. Nova needs to know this to determine the\noverall health of the deployment.\n\nRelated Options:\n\n* service_down_time\n  report_interval should be less than service_down_time. If service_down_time\n  is less than report_interval, services will routinely be considered down,\n  because they report in too rarely.\n'), cfg.IntOpt('service_down_time', default=60, help="\nMaximum time in seconds since last check-in for up service\n\nEach compute node periodically updates their database status based on the\nspecified report interval. If the compute node hasn't updated the status\nfor more than service_down_time, then the compute node is considered down.\n\nRelated Options:\n\n* report_interval (service_down_time should not be less than report_interval)\n"), cfg.BoolOpt('periodic_enable', default=True, help='\nEnable periodic tasks.\n\nIf set to true, this option allows services to periodically run tasks\non the manager.\n\nIn case of running multiple schedulers or conductors you may want to run\nperiodic tasks on only one host - in this case disable this option for all\nhosts but one.\n'), cfg.IntOpt('periodic_fuzzy_delay', default=60, min=0, help='\nNumber of seconds to randomly delay when starting the periodic task\nscheduler to reduce stampeding.\n\nWhen compute workers are restarted in unison across a cluster,\nthey all end up running the periodic tasks at the same time\ncausing problems for the external services. To mitigate this\nbehavior, periodic_fuzzy_delay option allows you to introduce a\nrandom initial delay when starting the periodic task scheduler.\n\nPossible Values:\n\n* Any positive integer (in seconds)\n* 0 : disable the random delay\n'), cfg.ListOpt('enabled_apis', item_type=cfg.types.String(choices=['osapi_compute', 'metadata']), default=['osapi_compute', 'metadata'], help='List of APIs to be enabled by default.'), cfg.ListOpt('enabled_ssl_apis', default=[], help='\nList of APIs with enabled SSL.\n\nNova provides SSL support for the API servers. enabled_ssl_apis option\nallows configuring the SSL support.\n'), cfg.StrOpt('osapi_compute_listen', default='0.0.0.0', help='\nIP address on which the OpenStack API will listen.\n\nThe OpenStack API service listens on this IP address for incoming\nrequests.\n'), cfg.PortOpt('osapi_compute_listen_port', default=8774, help='\nPort on which the OpenStack API will listen.\n\nThe OpenStack API service listens on this port number for incoming\nrequests.\n'), cfg.IntOpt('osapi_compute_workers', min=1, help='\nNumber of workers for OpenStack API service. The default will be the number\nof CPUs available.\n\nOpenStack API services can be configured to run as multi-process (workers).\nThis overcomes the problem of reduction in throughput when API request\nconcurrency increases. OpenStack API service will run in the specified\nnumber of processes.\n\nPossible Values:\n\n* Any positive integer\n* None (default value)\n'), cfg.StrOpt('metadata_listen', default='0.0.0.0', help='\nIP address on which the metadata API will listen.\n\nThe metadata API service listens on this IP address for incoming\nrequests.\n'), cfg.PortOpt('metadata_listen_port', default=8775, help='\nPort on which the metadata API will listen.\n\nThe metadata API service listens on this port number for incoming\nrequests.\n'), cfg.IntOpt('metadata_workers', min=1, help='\nNumber of workers for metadata service. If not specified the number of\navailable CPUs will be used.\n\nThe metadata service can be configured to run as multi-process (workers).\nThis overcomes the problem of reduction in throughput when API request\nconcurrency increases. The metadata service will run in the specified\nnumber of processes.\n\nPossible Values:\n\n* Any positive integer\n* None (default value)\n')]

@p.trace('register_opts')
def register_opts(conf):
    conf.register_opts(service_opts)

@p.trace('list_opts')
def list_opts():
    return {'DEFAULT': service_opts}